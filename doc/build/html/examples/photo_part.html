<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Example Photography exposure &mdash; pyNomo Documentation 0.3.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="pyNomo Documentation 0.3.0 documentation" href="../index.html" />
    <link rel="prev" title="Example: Amortized loan calculator" href="example_amortized_loan_calculator.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          pyNomo Documentation</a>
        <span class="navbar-text navbar-version pull-left"><b>0.3.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../main_page.html">Software documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../axes.html">Axes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../main_params.html">Main params</a></li>
<li class="toctree-l1"><a class="reference internal" href="../types/type1.html">Type 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../types/type2.html">Type 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../types/type3.html">Type 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../types/type4.html">Type 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../types/type9.html">Type 9</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_amortized_loan_calculator.html">Example: Amortized loan calculator</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Example Photography exposure</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Example Photography exposure</a><ul>
<li><a class="reference internal" href="#theory-and-background">Theory and background</a><ul>
<li><a class="reference internal" href="#shadow-lenght">Shadow lenght</a></li>
</ul>
</li>
<li><a class="reference internal" href="#construction-of-the-nomograph">Construction of the nomograph</a><ul>
<li><a class="reference internal" href="#block-1-type-9">Block 1 (Type 9)</a></li>
<li><a class="reference internal" href="#block-2-type-5">Block 2 (Type 5)</a></li>
<li><a class="reference internal" href="#block-3-type-5">Block 3 (Type 5)</a></li>
<li><a class="reference internal" href="#block-4-type-3">Block 4 (Type 3)</a></li>
<li><a class="reference internal" href="#block-5-type-8">Block 5 (Type 8)</a></li>
<li><a class="reference internal" href="#block-6-type-1">Block 6 (Type 1)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generated-nomograph">Generated nomograph</a></li>
<li><a class="reference internal" href="#source-code">Source code</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="example_amortized_loan_calculator.html" title="Previous Chapter: Example: Amortized loan calculator"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Example: Amortiz...</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/examples/photo_part.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="example-photography-exposure">
<h1>Example Photography exposure<a class="headerlink" href="#example-photography-exposure" title="Permalink to this headline">¶</a></h1>
<div class="section" id="theory-and-background">
<h2>Theory and background<a class="headerlink" href="#theory-and-background" title="Permalink to this headline">¶</a></h2>
<p>This example illustrates how exposure in photography depends on factors:
latitude, time of day, day of year, weather, composition. It relates
these to camera settings: film speed (e.g. ISO 100), aperture and
shutter speed. The mathematical approach and model is taken from book
written by V. Setälä. <a class="footnote-reference" href="#id3" id="id1">[1]</a> This book illustrates the approach as
nomographs but they are different compared with the one generatated
here. Book uses shadow length, but we break shadow length into time,
date and latitude via solar zenith angle.</p>
<p>The basic equation in Setälä (pp.492-494) can be extracted and
written as</p>
<div class="math" id="equation-setala1">
<span class="eqno">(1)</span>\[FS-L-A-W+C+T=0 \,\]</div>
<p>where parameters of <a href="#equation-setala1">(1)</a> are listed below:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="25%" />
<col width="63%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><span class="math">\(FS\,\)</span></td>
<td>Film speed</td>
<td>DIN value that equals <span class="math">\(10 \log (S) +1 \,\)</span>,where S is ISO FILM speed</td>
</tr>
<tr class="row-even"><td><span class="math">\(T\,\)</span></td>
<td>shutter time</td>
<td><span class="math">\(10 \log \left( \frac{t}{1/10}\right)\)</span></td>
</tr>
<tr class="row-odd"><td><span class="math">\(A\,\)</span></td>
<td>aperture</td>
<td><span class="math">\(10 \log \left(\frac{N^2}{3.2^2}\right)\)</span></td>
</tr>
<tr class="row-even"><td><span class="math">\(L\,\)</span></td>
<td>shadow length (in steps)</td>
<td>two times (shadow length)/(person length) <span class="math">\(= 2 \arctan ( \phi) \,\)</span>, where <span class="math">\(\phi \,\)</span> is solar zenith angle.</td>
</tr>
<tr class="row-odd"><td><span class="math">\(W\,\)</span></td>
<td>weather</td>
<td>Clear sky, Cumulus clouds: 0, Clear sky: 1, Sun through clouds: 3, Sky light gray: 6, Sky dark gray: 9, Thunder-clouds cover sky: 12</td>
</tr>
<tr class="row-even"><td><span class="math">\(C\,\)</span></td>
<td>Composition</td>
<td>Person under trees: -6, Inside forest : -4, Person in shadow of wall : -1, Person at open place; alley under trees : 2, Buildings; street : 5, Landscape and front matter : 7, Open landscape : 9, Snow landscape and front matter; beach : 11,Snow field; open sea : 13, Clouds : 15</td>
</tr>
</tbody>
</table>
<p>It is to be noted that Setälä has stops ten times base-10 logarithmic.
Today we think stops in base-2 logarithmic.</p>
<div class="section" id="shadow-lenght">
<h3>Shadow lenght<a class="headerlink" href="#shadow-lenght" title="Permalink to this headline">¶</a></h3>
<p>Calculation of shadow length as a function of day of year, time of day
and latitude is according to  <a class="footnote-reference" href="#id4" id="id2">[2]</a>. Following equations are used. For
fractional year (without time information) we take</p>
<p><span class="math">\(\gamma = (day-1+0.5)2\pi/365. \,\)</span></p>
<p>For time offset (eqtime) we use equation (in minutes)</p>
<p><span class="math">\(TO = 229.18(0.000075+0.001868\cos(\gamma)-0.032077\sin(´\gamma)-0.014615\cos(2\gamma)-0.040849\sin(2\gamma)) \,\)</span></p>
<p>to calculate that error is below 17 minutes for time axis. We assume
that sun is at heightest point at noon and this is the error and
approximation. We calculate stops in logarithmic scale and in this case
we do not need very accurate equations for time. For declination we use
equation</p>
<div class="math">
\[\begin{eqnarray*}
  D=0.006918-0.399912\cos(\gamma)+0.070257\sin(\gamma)-0.006758\cos(2\gamma) \\
  +0.000907\sin(2\gamma)-0.002697\cos(3\gamma)+0.00148\sin(3\gamma)
\end{eqnarray*}\]</div><p>and for hour angle</p>
<p><span class="math">\(ha=(60h+\overline{TO})/4-180. \,\)</span></p>
<p>Solar zenith angle (<span class="math">\(\phi \,\)</span>), latitude (LAT),
declination (D) and hour angle (ha) are connected with equation:</p>
<p><span class="math">\(\cos (\phi ) = \sin(LAT)sin(D)+\cos(LAT)\cos(D)\cos(ha). \,\)</span></p>
<p>This is in our desired form as a function of hour (h), day (day),
latitude (LAT), solar zenith angle (<span class="math">\(\phi \,\)</span>):</p>
<p><span class="math">\(\cos (\phi ) = \sin(LAT)sin(D(\gamma(day)))+\cos(LAT)\cos(D(\gamma(day)))\cos(ha(h)) \,\)</span>.</p>
<p>In practice illuminance of flat surface on earth depends on solar zenith
angle as <span class="math">\(\cos(\phi)\,\)</span>. Setälä uses shadow length that is
easily measurable, but scales incorrectly, as value is proportional to
<span class="math">\(\tan(\phi)\,\)</span>. Also Setälä sums linear value with
logarithmic ones as a practical approximation. To correct these
assumptions, here we assume that values for shadow length 1 and 10 for Setälä
are reasonable, and an equation that scales logarithmically is found:</p>
<p><span class="math">\(L = 0.33766 - 13.656 \log10 (\cos(\phi)) \,\)</span></p>
<p>that gives <span class="math">\(L=1\,\)</span> for <span class="math">\(\phi = 26.565 =\arctan(1/2)\,\)</span> and <span class="math">\(L=10\,\)</span> for <span class="math">\(\phi = 78.69 =\arctan(10/2).\,\)</span></p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Vilho Setälä: &#8220;Valokuvaus&#8221;, Otava 1940.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference external" href="http://www.srrb.noaa.govhighlights/sunrise/solareqns.PDF">http://www.srrb.noaa.govhighlights/sunrise/solareqns.PDF</a></td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="construction-of-the-nomograph">
<h2>Construction of the nomograph<a class="headerlink" href="#construction-of-the-nomograph" title="Permalink to this headline">¶</a></h2>
<p>The presented equation is the following:</p>
<div class="math">
\[\begin{eqnarray*}
    FS - \{0.33766 - 13.656 \log_{10}[ \sin(LAT)\sin(D(\gamma(day)))+\cos(LAT)\cos(D(\gamma(day)))\cos(ha(h))]\}\\
    - A - W + C + T = 0.
\end{eqnarray*}\]</div><p>In order to construct the nomograph, we split the equation into four blocks and an additional block to present values as EV100.</p>
<div class="section" id="block-1-type-9">
<h3>Block 1 (Type 9)<a class="headerlink" href="#block-1-type-9" title="Permalink to this headline">¶</a></h3>
<div class="math">
\[x_1 \equiv \cos(\phi)=\sin(LAT)sin(D(\gamma(day)))+\cos(LAT)\cos(D(\gamma(day)))\cos(ha(h))\,\]</div>
<p>formed into determinant:</p>
<div class="math">
\[\begin{split}\begin{vmatrix}
 0  &amp; \cos(\phi) &amp; 1\\
\frac{\cos(LAT)\cos(D(\gamma(day)))}{1+(\cos(LAT)\cos(D(\gamma(day))))}  &amp; \frac{\sin(LAT)\sin(D(\gamma(day)))}{1+(\cos(LAT)\cos(D(\gamma(day))))} &amp;1\\
1  &amp; -\cos(ha(h)) &amp;1 \\
 \end{vmatrix}
 =0.\end{split}\]</div>
</div>
<div class="section" id="block-2-type-5">
<h3>Block 2 (Type 5)<a class="headerlink" href="#block-2-type-5" title="Permalink to this headline">¶</a></h3>
<div class="math">
\[C_1 \equiv L+W = 0.006918-13.656 \log_{10}(x_1)+W \,\]</div>
<p>split into two equations for contour construction:</p>
<div class="math">
\[y_1 = C_1 \,\]</div>
<div class="math">
\[y_1 = 0.006918-13.656  \log_{10}(x_1)+W \,\]</div>
</div>
<div class="section" id="block-3-type-5">
<h3>Block 3 (Type 5)<a class="headerlink" href="#block-3-type-5" title="Permalink to this headline">¶</a></h3>
<div class="math">
\[C_2 \equiv L+W+C = C_1+C \,\]</div>
<p>split into two equations for contour construction:</p>
<div class="math">
\[y_2 = C_2 \,\]</div>
<div class="math">
\[y_2 = C_1+C \,\]</div>
</div>
<div class="section" id="block-4-type-3">
<h3>Block 4 (Type 3)<a class="headerlink" href="#block-4-type-3" title="Permalink to this headline">¶</a></h3>
<div class="math">
\[C_2 = FS-A+T \,\]</div>
<p>equals</p>
<div class="math">
\[C_2 -(10 \log_{10}(S)+1.0)+10 \log_{10}\left(\frac{N^2}{3.2^2} \right)-10 \log_{10}\left( \frac{1/t_i}{1/10}\right)=0, \,\]</div>
<p>where</p>
<div class="math">
\[t_i\equiv 1/t \,\]</div>
<p>is inverse shutter time.</p>
</div>
<div class="section" id="block-5-type-8">
<h3>Block 5 (Type 8)<a class="headerlink" href="#block-5-type-8" title="Permalink to this headline">¶</a></h3>
<p>Additional EV100 scale by using relation</p>
<div class="math">
\[C_2 =(-EV_{100}+13.654)/0.3322 \,\]</div>
</div>
<div class="section" id="block-6-type-1">
<h3>Block 6 (Type 1)<a class="headerlink" href="#block-6-type-1" title="Permalink to this headline">¶</a></h3>
<p>Maximum focal length calculator according to equation</p>
<div class="math">
\[t_i / f = FL\]</div>
<p>written as</p>
<div class="math">
\[-10 \log_{10}\left( \frac{1/t_i}{1/10}\right)-10 \log_{10}\left( \frac{f}{10} \right)  -10 \log_{10}\left( FL \right)=0\]</div>
<p>in order to align correctly with previous equation.  The values for the factor <span class="math">\(f\,\)</span>  are: DSLR (3/2), 35mm (1),
DSLR image stabilization (3/8) and 35mm image stabilization (1/8).</p>
</div>
</div>
<div class="section" id="generated-nomograph">
<h2>Generated nomograph<a class="headerlink" href="#generated-nomograph" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/ex_photo_exposure.png" src="../_images/ex_photo_exposure.png" />
</div>
<div class="section" id="source-code">
<h2>Source code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449</pre></div></td><td class="code"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ex_photo_exposure.py</span>

<span class="sd">    Photgraph exposure.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;..&quot;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pynomo.nomographer</span> <span class="kn">import</span> <span class="o">*</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">functions for solartime taken from solareqns.pdf from</span>
<span class="sd">http://www.srrb.noaa.gov/highlights/sunrise/solareqns.PDF</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c"># fractional year</span>
<span class="k">def</span> <span class="nf">gamma</span><span class="p">(</span><span class="n">day</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">365.0</span><span class="o">*</span><span class="p">(</span><span class="n">day</span><span class="o">-</span><span class="mi">1</span><span class="o">+</span><span class="mf">0.5</span><span class="p">)</span>
<span class="c"># equation of time</span>
<span class="k">def</span> <span class="nf">eq_time</span><span class="p">(</span><span class="n">day</span><span class="p">):</span>
    <span class="n">gamma0</span><span class="o">=</span><span class="n">gamma</span><span class="p">(</span><span class="n">day</span><span class="p">)</span>
    <span class="k">return</span> <span class="mf">229.18</span><span class="o">*</span><span class="p">(</span><span class="mf">0.000075</span><span class="o">+</span><span class="mf">0.001868</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">gamma0</span><span class="p">)</span><span class="o">-</span><span class="mf">0.032077</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">gamma0</span><span class="p">)</span>\
                   <span class="o">-</span><span class="mf">0.014615</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">gamma0</span><span class="p">)</span><span class="o">-</span><span class="mf">0.040849</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">gamma0</span><span class="p">))</span>

<span class="c"># mean correction, with constant correction we make less than 17 minutes  error</span>
<span class="c"># in time axis</span>
<span class="n">temp_a</span><span class="o">=</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">365.0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">temp_b</span><span class="o">=</span><span class="n">eq_time</span><span class="p">(</span><span class="n">temp_a</span><span class="p">)</span>
<span class="n">correction</span><span class="o">=</span><span class="n">mean</span><span class="p">(</span><span class="n">temp_b</span><span class="p">)</span> <span class="c"># this is 0.0171885 minutes</span>
<span class="c">#print &quot;maximum time errors: %g %g&quot;%(min(temp_b),max(temp_b))</span>

<span class="c"># declination</span>
<span class="k">def</span> <span class="nf">eq_declination</span><span class="p">(</span><span class="n">day</span><span class="p">):</span>
    <span class="n">g0</span><span class="o">=</span><span class="n">gamma</span><span class="p">(</span><span class="n">day</span><span class="p">)</span>
    <span class="k">return</span> <span class="mf">0.006918</span><span class="o">-</span><span class="mf">0.399912</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">g0</span><span class="p">)</span><span class="o">+</span><span class="mf">0.070257</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">g0</span><span class="p">)</span><span class="o">-</span><span class="mf">0.006758</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">g0</span><span class="p">)</span>\
            <span class="o">+</span><span class="mf">0.000907</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">g0</span><span class="p">)</span><span class="o">-</span><span class="mf">0.002697</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">g0</span><span class="p">)</span><span class="o">+</span><span class="mf">0.00148</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">g0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">f1</span><span class="p">(</span><span class="n">dummy</span><span class="p">):</span>
    <span class="k">return</span> <span class="mf">0.0</span>
<span class="k">def</span> <span class="nf">g1</span><span class="p">(</span><span class="n">fii</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">cos</span><span class="p">(</span><span class="n">fii</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">f2</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span><span class="n">day</span><span class="p">):</span>
    <span class="n">dec</span><span class="o">=</span><span class="n">eq_declination</span><span class="p">(</span><span class="n">day</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">lat</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">dec</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">lat</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">dec</span><span class="p">)))</span>
<span class="k">def</span> <span class="nf">g2</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span><span class="n">day</span><span class="p">):</span>
    <span class="n">dec</span><span class="o">=</span><span class="n">eq_declination</span><span class="p">(</span><span class="n">day</span><span class="p">)</span> <span class="c"># in radians</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">lat</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">dec</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">lat</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">dec</span><span class="p">)))</span>

<span class="k">def</span> <span class="nf">f3</span><span class="p">(</span><span class="n">dummy</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">1</span>
<span class="k">def</span> <span class="nf">g3</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
    <span class="n">hr</span><span class="o">=</span><span class="p">(</span><span class="n">h</span><span class="o">*</span><span class="mf">60.0</span><span class="o">+</span><span class="n">correction</span><span class="p">)</span><span class="o">/</span><span class="mf">4.0</span><span class="o">-</span><span class="mf">180.0</span>
    <span class="k">return</span> <span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">hr</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span>

<span class="n">days_in_month</span> <span class="o">=</span> <span class="p">(</span><span class="mi">31</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">)</span>
<span class="n">times1</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">):</span>
    <span class="n">times1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">days_in_month</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">idx</span><span class="p">])</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>


<span class="c">#times=linspace(0,350,10)</span>
<span class="c">#times=arange(0.0,360.0,10.0,dtype=double).tolist()</span>
<span class="n">time_titles</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;January&#39;</span><span class="p">,</span><span class="s">&#39;February&#39;</span><span class="p">,</span><span class="s">&#39;March&#39;</span><span class="p">,</span><span class="s">&#39;April&#39;</span><span class="p">,</span><span class="s">&#39;May&#39;</span><span class="p">,</span><span class="s">&#39;June&#39;</span><span class="p">,</span>
             <span class="s">&#39;July&#39;</span><span class="p">,</span><span class="s">&#39;August&#39;</span><span class="p">,</span><span class="s">&#39;September&#39;</span><span class="p">,</span><span class="s">&#39;October&#39;</span><span class="p">,</span><span class="s">&#39;November&#39;</span><span class="p">,</span><span class="s">&#39;December&#39;</span><span class="p">]</span>

<span class="n">phi_params</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">90.0</span><span class="p">,</span>
        <span class="s">&#39;u_min_trafo&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">&#39;u_max_trafo&#39;</span><span class="p">:</span><span class="mf">90.0</span><span class="p">,</span>
        <span class="s">&#39;f&#39;</span><span class="p">:</span><span class="n">f1</span><span class="p">,</span>
        <span class="s">&#39;g&#39;</span><span class="p">:</span><span class="n">g1</span><span class="p">,</span>
        <span class="s">&#39;h&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">u</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">r&#39;Solar zenith angle $\phi$&#39;</span><span class="p">,</span>
        <span class="s">&#39;title_x_shift&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">&#39;title_y_shift&#39;</span><span class="p">:</span><span class="mf">0.25</span><span class="p">,</span>
        <span class="s">&#39;scale_type&#39;</span><span class="p">:</span><span class="s">&#39;linear smart&#39;</span><span class="p">,</span>
        <span class="s">&#39;tick_levels&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span>
        <span class="s">&#39;tick_text_levels&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
        <span class="s">&#39;tick_side&#39;</span><span class="p">:</span><span class="s">&#39;right&#39;</span><span class="p">,</span>
        <span class="s">&#39;tag&#39;</span><span class="p">:</span><span class="s">&#39;phi&#39;</span><span class="p">,</span>
        <span class="s">&#39;grid&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span>
<span class="c">#        &#39;extra_params&#39;:[{&#39;u_min&#39;:20.0,</span>
<span class="c">#                         &#39;u_max&#39;:90.0,</span>
<span class="c">#                         &#39;tick_levels&#39;:4,</span>
<span class="c">#                         &#39;tick_text_levels&#39;:2,</span>
<span class="c">#                         }]</span>
        <span class="p">}</span>

<span class="n">time_params</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">23.0</span><span class="p">,</span>
        <span class="s">&#39;u_min_trafo&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">&#39;u_max_trafo&#39;</span><span class="p">:</span><span class="mf">12.0</span><span class="p">,</span>
        <span class="s">&#39;f&#39;</span><span class="p">:</span><span class="n">f3</span><span class="p">,</span>
        <span class="s">&#39;g&#39;</span><span class="p">:</span><span class="n">g3</span><span class="p">,</span>
        <span class="s">&#39;h&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">u</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">r&#39;Hour (h)&#39;</span><span class="p">,</span>
        <span class="s">&#39;title_x_shift&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="s">&#39;title_y_shift&#39;</span><span class="p">:</span><span class="mf">0.25</span><span class="p">,</span>
        <span class="s">&#39;scale_type&#39;</span><span class="p">:</span><span class="s">&#39;linear&#39;</span><span class="p">,</span>
        <span class="s">&#39;tick_levels&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
        <span class="s">&#39;tick_text_levels&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        <span class="s">&#39;tick_side&#39;</span><span class="p">:</span><span class="s">&#39;right&#39;</span><span class="p">,</span>
        <span class="s">&#39;tag&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">,</span>
        <span class="s">&#39;grid&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span>
        <span class="p">}</span>

<span class="n">lat_day_params</span><span class="o">=</span><span class="p">{</span>
    <span class="s">&#39;ID&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">,</span> <span class="c"># to identify the axis</span>
    <span class="s">&#39;tag&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">,</span> <span class="c"># for aligning block wrt others</span>
    <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">&#39;Grid&#39;</span><span class="p">,</span>
    <span class="s">&#39;title_x_shift&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="s">&#39;title_y_shift&#39;</span><span class="p">:</span><span class="mf">0.25</span><span class="p">,</span>
    <span class="s">&#39;title_distance_center&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="s">&#39;title_opposite_tick&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
    <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="mf">20.0</span><span class="p">,</span> <span class="c"># for alignment</span>
    <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">80.0</span><span class="p">,</span>  <span class="c"># for alignment</span>
    <span class="s">&#39;f_grid&#39;</span><span class="p">:</span><span class="n">f2</span><span class="p">,</span>
    <span class="s">&#39;g_grid&#39;</span><span class="p">:</span><span class="n">g2</span><span class="p">,</span>
    <span class="s">&#39;h_grid&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="s">&#39;u_start&#39;</span><span class="p">:</span><span class="mf">30.0</span><span class="p">,</span>
    <span class="s">&#39;u_stop&#39;</span><span class="p">:</span><span class="mf">80.0</span><span class="p">,</span>
    <span class="s">&#39;v_start&#39;</span><span class="p">:</span><span class="n">times1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="c"># day</span>
    <span class="s">&#39;v_stop&#39;</span><span class="p">:</span><span class="n">times1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
    <span class="s">&#39;u_values&#39;</span><span class="p">:[</span><span class="mf">30.0</span><span class="p">,</span><span class="mf">40.0</span><span class="p">,</span><span class="mf">50.0</span><span class="p">,</span><span class="mf">60.0</span><span class="p">,</span><span class="mf">70.0</span><span class="p">,</span><span class="mf">80.0</span><span class="p">],</span>
    <span class="s">&#39;u_texts&#39;</span><span class="p">:[</span><span class="s">&#39;30&#39;</span><span class="p">,</span><span class="s">&#39;40&#39;</span><span class="p">,</span><span class="s">&#39;50&#39;</span><span class="p">,</span><span class="s">&#39;Latitude = 60&#39;</span><span class="p">,</span><span class="s">&#39;70&#39;</span><span class="p">,</span><span class="s">&#39;80&#39;</span><span class="p">],</span>
    <span class="s">&#39;v_values&#39;</span><span class="p">:</span><span class="n">times1</span><span class="p">,</span>
    <span class="s">&#39;v_texts&#39;</span><span class="p">:</span><span class="n">time_titles</span><span class="p">,</span>
    <span class="s">&#39;grid&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
    <span class="s">&#39;text_prefix_u&#39;</span><span class="p">:</span><span class="s">r&#39;&#39;</span><span class="p">,</span>
    <span class="s">&#39;text_prefix_v&#39;</span><span class="p">:</span><span class="s">r&#39;&#39;</span><span class="p">,</span>
    <span class="s">&#39;text_distance&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="s">&#39;v_texts_u_start&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span>
    <span class="s">&#39;v_texts_u_stop&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
    <span class="s">&#39;u_texts_v_start&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span>
    <span class="s">&#39;u_texts_v_stop&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
    <span class="p">}</span>

<span class="n">block_params</span><span class="o">=</span><span class="p">{</span>
             <span class="s">&#39;block_type&#39;</span><span class="p">:</span><span class="s">&#39;type_9&#39;</span><span class="p">,</span>
             <span class="s">&#39;f1_params&#39;</span><span class="p">:</span><span class="n">phi_params</span><span class="p">,</span>
             <span class="s">&#39;f2_params&#39;</span><span class="p">:</span><span class="n">lat_day_params</span><span class="p">,</span>
             <span class="s">&#39;f3_params&#39;</span><span class="p">:</span><span class="n">time_params</span><span class="p">,</span>
             <span class="s">&#39;transform_ini&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
             <span class="s">&#39;isopleth_values&#39;</span><span class="p">:[[</span><span class="s">&#39;x&#39;</span><span class="p">,[</span><span class="mi">60</span><span class="p">,</span><span class="n">times1</span><span class="p">[</span><span class="mi">4</span><span class="p">]],</span><span class="mf">14.0</span><span class="p">]],</span>
             <span class="p">}</span>

<span class="c"># limiting functions are to avoid NaN in contour construction that uses optimization</span>
<span class="k">def</span> <span class="nf">limit_xx</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x1</span><span class="o">=</span><span class="n">x</span>
<span class="c">#    if x1&gt;1.0:</span>
<span class="c">#        x1=1.0</span>
<span class="c">#    if x1&lt;-1.0:</span>
<span class="c">#        x1=-1.0</span>
    <span class="k">return</span> <span class="n">x1</span>

<span class="k">def</span> <span class="nf">limit_x</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x1</span><span class="o">=</span><span class="n">x</span>
<span class="c">#    if not x1&gt;0.0:</span>
<span class="c">#        x1=0.0001</span>
    <span class="k">return</span> <span class="n">x1</span>

<span class="n">const_A</span><span class="o">=</span><span class="mf">0.33766</span>
<span class="n">const_B</span><span class="o">=-</span><span class="mf">13.656</span>

<span class="n">block_params_weather</span><span class="o">=</span><span class="p">{</span>
   <span class="s">&#39;block_type&#39;</span><span class="p">:</span><span class="s">&#39;type_5&#39;</span><span class="p">,</span>
   <span class="s">&#39;u_func&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">u</span><span class="p">:</span><span class="n">u</span><span class="p">,</span>
   <span class="s">&#39;v_func&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">v</span><span class="p">:</span><span class="n">const_A</span><span class="o">+</span><span class="n">const_B</span><span class="o">*</span><span class="n">log10</span><span class="p">(</span><span class="n">limit_x</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">+</span><span class="n">v</span><span class="p">,</span>
   <span class="c">#&#39;u_values&#39;:[1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0,15.0,20,25],</span>
   <span class="s">&#39;u_values&#39;</span><span class="p">:[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">25.0</span><span class="p">],</span>
   <span class="s">&#39;u_manual_axis_data&#39;</span><span class="p">:{</span><span class="mf">1.0</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                         <span class="mf">25.0</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">},</span>
   <span class="s">&#39;v_values&#39;</span><span class="p">:[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">6.0</span><span class="p">,</span><span class="mf">9.0</span><span class="p">,</span><span class="mf">12.0</span><span class="p">],</span>
   <span class="s">&#39;v_manual_axis_data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">:[</span><span class="s">&#39;Clear sky, Cumulus clouds&#39;</span><span class="p">,{</span><span class="s">&#39;x_corr&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
                                                            <span class="s">&#39;y_corr&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span>
                                                            <span class="s">&#39;draw_line&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">}],</span>
                     <span class="mf">1.0</span><span class="p">:</span><span class="s">&#39;Clear sky&#39;</span><span class="p">,</span>
                     <span class="mf">3.0</span><span class="p">:</span><span class="s">&#39;Sun through clouds&#39;</span><span class="p">,</span>
                     <span class="mf">6.0</span><span class="p">:</span><span class="s">&#39;Sky light gray&#39;</span><span class="p">,</span>
                     <span class="mf">9.0</span><span class="p">:</span><span class="s">&#39;Sky dark gray&#39;</span><span class="p">,</span>
                     <span class="mf">12.0</span><span class="p">:</span><span class="s">&#39;Thunder-clouds cover sky&#39;</span><span class="p">,</span>
                     <span class="p">},</span>
   <span class="s">&#39;v_text_distance&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
   <span class="s">&#39;wd_tick_levels&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s">&#39;wd_tick_text_levels&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s">&#39;wd_tick_side&#39;</span><span class="p">:</span><span class="s">&#39;right&#39;</span><span class="p">,</span>
   <span class="s">&#39;wd_title&#39;</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">,</span>
   <span class="s">&#39;manual_x_scale&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
   <span class="s">&#39;x_min&#39;</span><span class="p">:</span><span class="mf">0.06</span><span class="p">,</span>
   <span class="s">&#39;x_max&#39;</span><span class="p">:</span><span class="mf">0.99</span><span class="p">,</span>
   <span class="s">&#39;u_title&#39;</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">,</span>
   <span class="s">&#39;v_title&#39;</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">,</span>
   <span class="s">&#39;wd_title_opposite_tick&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
   <span class="s">&#39;wd_title_distance_center&#39;</span><span class="p">:</span><span class="mf">2.5</span><span class="p">,</span>
   <span class="s">&#39;wd_align_func&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">L</span><span class="p">:</span><span class="n">acos</span><span class="p">(</span><span class="n">limit_xx</span><span class="p">(</span><span class="mf">10.0</span><span class="o">**</span><span class="p">((</span><span class="n">L</span><span class="o">-</span><span class="n">const_A</span><span class="p">)</span><span class="o">/</span><span class="n">const_B</span><span class="p">)))</span><span class="o">*</span><span class="mf">180.0</span><span class="o">/</span><span class="n">pi</span><span class="p">,</span> <span class="c"># phi as L</span>
   <span class="s">&#39;wd_func&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">L</span><span class="p">:</span><span class="mf">10.0</span><span class="o">**</span><span class="p">((</span><span class="n">L</span><span class="o">-</span><span class="n">const_A</span><span class="p">)</span><span class="o">/</span><span class="n">const_B</span><span class="p">),</span> <span class="c"># x as L</span>
   <span class="s">&#39;wd_func_inv&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">const_A</span><span class="o">+</span><span class="n">const_B</span><span class="o">*</span><span class="n">log10</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="c"># L as x</span>
   <span class="s">&#39;wd_tag&#39;</span><span class="p">:</span><span class="s">&#39;phi&#39;</span><span class="p">,</span>
   <span class="s">&#39;mirror_y&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
   <span class="s">&#39;mirror_x&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span>
   <span class="s">&#39;width&#39;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">,</span>
   <span class="s">&#39;height&#39;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">,</span>
   <span class="s">&#39;u_scale_opposite&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
   <span class="s">&#39;u_tag&#39;</span><span class="p">:</span><span class="s">&#39;AA&#39;</span><span class="p">,</span>
   <span class="s">&#39;horizontal_guides&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
   <span class="s">&#39;isopleth_values&#39;</span><span class="p">:[[</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="mf">9.0</span><span class="p">,</span><span class="s">&#39;x&#39;</span><span class="p">]],</span>
 <span class="p">}</span>

<span class="n">block_params_scene</span><span class="o">=</span><span class="p">{</span>
   <span class="s">&#39;block_type&#39;</span><span class="p">:</span><span class="s">&#39;type_5&#39;</span><span class="p">,</span>
   <span class="s">&#39;u_func&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">u</span><span class="p">:</span><span class="n">u</span><span class="p">,</span>
   <span class="s">&#39;v_func&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">v</span><span class="p">:</span><span class="n">x</span><span class="o">+</span><span class="n">v</span><span class="p">,</span>
   <span class="s">&#39;u_values&#39;</span><span class="p">:[</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">25.0</span><span class="p">],</span>
   <span class="s">&#39;u_manual_axis_data&#39;</span><span class="p">:{</span><span class="mf">1.0</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                         <span class="mf">25.0</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">},</span>
   <span class="s">&#39;u_tag&#39;</span><span class="p">:</span><span class="s">&#39;AA&#39;</span><span class="p">,</span>
   <span class="s">&#39;wd_tag&#39;</span><span class="p">:</span><span class="s">&#39;EV&#39;</span><span class="p">,</span>
   <span class="s">&#39;v_values&#39;</span><span class="p">:[</span><span class="o">-</span><span class="mf">4.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">5.0</span><span class="p">,</span><span class="mf">7.0</span><span class="p">,</span><span class="mf">9.0</span><span class="p">,</span><span class="mf">11.0</span><span class="p">,</span><span class="mf">13.0</span><span class="p">,</span><span class="mf">15.0</span><span class="p">],</span>
   <span class="s">&#39;v_manual_axis_data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">-</span><span class="mf">6.0</span><span class="p">:</span><span class="s">&#39;Person under trees&#39;</span><span class="p">,</span>
                          <span class="o">-</span><span class="mf">4.0</span><span class="p">:</span><span class="s">&#39;Inside forest&#39;</span><span class="p">,</span>
                          <span class="o">-</span><span class="mf">1.0</span><span class="p">:</span><span class="s">&#39;Person in shadow of wall&#39;</span><span class="p">,</span>
                          <span class="mf">2.0</span><span class="p">:</span><span class="s">&#39;Person at open place; alley under trees&#39;</span><span class="p">,</span>
                          <span class="mf">5.0</span><span class="p">:</span><span class="s">&#39;Buildings; street&#39;</span><span class="p">,</span>
                          <span class="mf">7.0</span><span class="p">:</span><span class="s">&#39;Landscape and front matter&#39;</span><span class="p">,</span>
                          <span class="mf">9.0</span><span class="p">:</span><span class="s">&#39;Open landscape&#39;</span><span class="p">,</span>
                          <span class="mf">11.0</span><span class="p">:</span><span class="s">&#39;Snow landscape and front matter; beach&#39;</span><span class="p">,</span>
                          <span class="mf">13.0</span><span class="p">:</span><span class="s">&#39;Snow field; open sea&#39;</span><span class="p">,</span>
                          <span class="mf">15.0</span><span class="p">:</span><span class="s">&#39;Clouds&#39;</span><span class="p">,</span>
                          <span class="p">},</span>
   <span class="s">&#39;wd_tick_levels&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s">&#39;wd_tick_text_levels&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s">&#39;wd_tick_side&#39;</span><span class="p">:</span><span class="s">&#39;right&#39;</span><span class="p">,</span>
   <span class="s">&#39;wd_title&#39;</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">,</span>
   <span class="s">&#39;u_title&#39;</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">,</span>
   <span class="s">&#39;v_title&#39;</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">,</span>
   <span class="s">&#39;wd_title_opposite_tick&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
   <span class="s">&#39;wd_title_distance_center&#39;</span><span class="p">:</span><span class="mf">2.5</span><span class="p">,</span>
   <span class="s">&#39;mirror_x&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
   <span class="s">&#39;horizontal_guides&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
   <span class="s">&#39;u_align_y_offset&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">0.9</span><span class="p">,</span>
   <span class="s">&#39;isopleth_values&#39;</span><span class="p">:[[</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="s">&#39;x&#39;</span><span class="p">]],</span>
 <span class="p">}</span>


<span class="n">camera_params_1</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">10.0</span><span class="p">,</span>
        <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">15.0</span><span class="p">,</span>
        <span class="s">&#39;function&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">u</span><span class="p">:</span><span class="n">u</span><span class="p">,</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">r&#39;&#39;</span><span class="p">,</span>
        <span class="s">&#39;tick_levels&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s">&#39;tick_text_levels&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s">&#39;tag&#39;</span><span class="p">:</span><span class="s">&#39;EV&#39;</span><span class="p">,</span>
                <span class="p">}</span>
<span class="n">camera_params_2</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">,</span>
        <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">25600.0</span><span class="p">,</span>
        <span class="s">&#39;function&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">S</span><span class="p">:</span><span class="o">-</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="n">log10</span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="o">+</span><span class="mf">1.0</span><span class="p">),</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">r&#39;Film speed&#39;</span><span class="p">,</span>
        <span class="s">&#39;manual_axis_data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mf">10.0</span><span class="p">:</span><span class="s">&#39;ISO 10&#39;</span><span class="p">,</span>
                             <span class="mf">20.0</span><span class="p">:</span><span class="s">&#39;ISO 20&#39;</span><span class="p">,</span>
                             <span class="c">#40.0:&#39;ISO 40&#39;,</span>
                             <span class="mf">50.0</span><span class="p">:</span><span class="s">&#39;ISO 50&#39;</span><span class="p">,</span>
                             <span class="mf">100.0</span><span class="p">:</span><span class="s">&#39;ISO 100&#39;</span><span class="p">,</span>
                             <span class="mf">200.0</span><span class="p">:</span><span class="s">&#39;ISO 200&#39;</span><span class="p">,</span>
                             <span class="mf">400.0</span><span class="p">:</span><span class="s">&#39;ISO 400&#39;</span><span class="p">,</span>
                             <span class="mf">800.0</span><span class="p">:</span><span class="s">&#39;ISO 800&#39;</span><span class="p">,</span>
                             <span class="mf">1600.0</span><span class="p">:</span><span class="s">&#39;ISO 1600&#39;</span><span class="p">,</span>
                             <span class="mf">3200.0</span><span class="p">:</span><span class="s">&#39;ISO 3200&#39;</span><span class="p">,</span>
                             <span class="mf">6400.0</span><span class="p">:</span><span class="s">&#39;ISO 6400&#39;</span><span class="p">,</span>
                             <span class="mf">12800.0</span><span class="p">:</span><span class="s">&#39;ISO 12800&#39;</span><span class="p">,</span>
                             <span class="mf">25600.0</span><span class="p">:</span><span class="s">&#39;ISO 25600&#39;</span><span class="p">,</span>
                             <span class="p">},</span>
        <span class="s">&#39;scale_type&#39;</span><span class="p">:</span><span class="s">&#39;manual line&#39;</span>
                <span class="p">}</span>
<span class="n">camera_params_3</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span>
        <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">10000.0</span><span class="p">,</span>
        <span class="s">&#39;function&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="o">*</span><span class="n">log10</span><span class="p">((</span><span class="mf">1.0</span><span class="o">/</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">10.0</span><span class="p">))</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span>
        <span class="s">&#39;manual_axis_data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="o">/</span><span class="mf">10.0</span><span class="p">:</span><span class="s">&#39;10&#39;</span><span class="p">,</span>
                             <span class="mi">1</span><span class="o">/</span><span class="mf">7.0</span><span class="p">:</span><span class="s">&#39;7&#39;</span><span class="p">,</span>
                             <span class="mi">1</span><span class="o">/</span><span class="mf">5.0</span><span class="p">:</span><span class="s">&#39;5&#39;</span><span class="p">,</span>
                             <span class="mi">1</span><span class="o">/</span><span class="mf">3.0</span><span class="p">:</span><span class="s">&#39;3&#39;</span><span class="p">,</span>
                             <span class="mi">1</span><span class="o">/</span><span class="mf">2.0</span><span class="p">:</span><span class="s">&#39;2&#39;</span><span class="p">,</span>
                             <span class="mf">1.0</span><span class="p">:</span><span class="s">&#39;1&#39;</span><span class="p">,</span>
                             <span class="mf">2.0</span><span class="p">:</span><span class="s">&#39;1/2&#39;</span><span class="p">,</span>
                             <span class="mf">3.0</span><span class="p">:</span><span class="s">&#39;1/3&#39;</span><span class="p">,</span>
                             <span class="mf">5.0</span><span class="p">:</span><span class="s">&#39;1/5&#39;</span><span class="p">,</span>
                             <span class="mf">7.0</span><span class="p">:</span><span class="s">&#39;1/7&#39;</span><span class="p">,</span>
                             <span class="mf">10.0</span><span class="p">:</span><span class="s">&#39;1/10&#39;</span><span class="p">,</span>
                             <span class="mf">20.0</span><span class="p">:</span><span class="s">&#39;1/20&#39;</span><span class="p">,</span>
                             <span class="mf">30.0</span><span class="p">:</span><span class="s">&#39;1/30&#39;</span><span class="p">,</span>
                             <span class="mf">50.0</span><span class="p">:</span><span class="s">&#39;1/50&#39;</span><span class="p">,</span>
                             <span class="mf">70.0</span><span class="p">:</span><span class="s">&#39;1/70&#39;</span><span class="p">,</span>
                             <span class="mf">100.0</span><span class="p">:</span><span class="s">&#39;1/100&#39;</span><span class="p">,</span>
                             <span class="mf">200.0</span><span class="p">:</span><span class="s">&#39;1/200&#39;</span><span class="p">,</span>
                             <span class="mf">300.0</span><span class="p">:</span><span class="s">&#39;1/300&#39;</span><span class="p">,</span>
                             <span class="mf">500.0</span><span class="p">:</span><span class="s">&#39;1/500&#39;</span><span class="p">,</span>
                             <span class="mf">700.0</span><span class="p">:</span><span class="s">&#39;1/700&#39;</span><span class="p">,</span>
                             <span class="mf">1000.0</span><span class="p">:</span><span class="s">&#39;1/1000&#39;</span><span class="p">,</span>
                             <span class="mf">2000.0</span><span class="p">:</span><span class="s">&#39;1/2000&#39;</span><span class="p">,</span>
                             <span class="mf">3000.0</span><span class="p">:</span><span class="s">&#39;1/3000&#39;</span><span class="p">,</span>
                             <span class="mf">5000.0</span><span class="p">:</span><span class="s">&#39;1/5000&#39;</span><span class="p">,</span>
                             <span class="mf">7000.0</span><span class="p">:</span><span class="s">&#39;1/7000&#39;</span><span class="p">,</span>
                             <span class="mf">10000.0</span><span class="p">:</span><span class="s">&#39;1/10000&#39;</span><span class="p">,</span>
                             <span class="p">},</span>
        <span class="s">&#39;scale_type&#39;</span><span class="p">:</span><span class="s">&#39;manual line&#39;</span><span class="p">,</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">r&#39;t (s)&#39;</span><span class="p">,</span>
        <span class="s">&#39;text_format&#39;</span><span class="p">:</span><span class="s">r&quot;1/</span><span class="si">%3.0f</span><span class="s"> s&quot;</span><span class="p">,</span>
        <span class="s">&#39;tag&#39;</span><span class="p">:</span><span class="s">&#39;shutter&#39;</span><span class="p">,</span>
        <span class="s">&#39;tick_side&#39;</span><span class="p">:</span><span class="s">&#39;left&#39;</span><span class="p">,</span>
                <span class="p">}</span>

<span class="n">camera_params_4</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">22.0</span><span class="p">,</span>
        <span class="s">&#39;function&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">N</span><span class="p">:</span><span class="mi">10</span><span class="o">*</span><span class="n">log10</span><span class="p">((</span><span class="n">N</span><span class="o">/</span><span class="mf">3.2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">30</span><span class="p">,</span>
        <span class="s">&#39;manual_axis_data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mf">1.0</span><span class="p">:</span><span class="s">&#39;$f$/1&#39;</span><span class="p">,</span>
                             <span class="mf">1.2</span><span class="p">:</span><span class="s">&#39;$f$/1.2&#39;</span><span class="p">,</span>
                             <span class="mf">1.4</span><span class="p">:</span><span class="s">&#39;$f$/1.4&#39;</span><span class="p">,</span>
                             <span class="mf">1.7</span><span class="p">:</span><span class="s">&#39;$f$/1.7&#39;</span><span class="p">,</span>
                             <span class="mf">2.0</span><span class="p">:</span><span class="s">&#39;$f$/2&#39;</span><span class="p">,</span>
                             <span class="mf">2.4</span><span class="p">:</span><span class="s">&#39;$f$/2.4&#39;</span><span class="p">,</span>
                             <span class="mf">2.8</span><span class="p">:</span><span class="s">&#39;$f$/2.8&#39;</span><span class="p">,</span>
                             <span class="mf">3.3</span><span class="p">:</span><span class="s">&#39;$f$/3.3&#39;</span><span class="p">,</span>
                             <span class="mf">4.0</span><span class="p">:</span><span class="s">&#39;$f$/4&#39;</span><span class="p">,</span>
                             <span class="mf">4.8</span><span class="p">:</span><span class="s">&#39;$f$/4.8&#39;</span><span class="p">,</span>
                             <span class="mf">5.6</span><span class="p">:</span><span class="s">&#39;$f$/5.6&#39;</span><span class="p">,</span>
                             <span class="mf">6.7</span><span class="p">:</span><span class="s">&#39;$f$/6.7&#39;</span><span class="p">,</span>
                             <span class="mf">8.0</span><span class="p">:</span><span class="s">&#39;$f$/8&#39;</span><span class="p">,</span>
                             <span class="mf">9.5</span><span class="p">:</span><span class="s">&#39;$f$/9.5&#39;</span><span class="p">,</span>
                             <span class="mf">11.0</span><span class="p">:</span><span class="s">&#39;$f$/11&#39;</span><span class="p">,</span>
                             <span class="mf">13.0</span><span class="p">:</span><span class="s">&#39;$f$/13&#39;</span><span class="p">,</span>
                             <span class="mf">16.0</span><span class="p">:</span><span class="s">&#39;$f$/16&#39;</span><span class="p">,</span>
                             <span class="mf">19.0</span><span class="p">:</span><span class="s">&#39;$f$/19&#39;</span><span class="p">,</span>
                             <span class="mf">22.0</span><span class="p">:</span><span class="s">&#39;$f$/22&#39;</span><span class="p">,</span>
                             <span class="p">},</span>
        <span class="s">&#39;scale_type&#39;</span><span class="p">:</span><span class="s">&#39;manual line&#39;</span><span class="p">,</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">r&#39;Aperture&#39;</span><span class="p">,</span>
                <span class="p">}</span>

<span class="n">block_params_camera</span><span class="o">=</span><span class="p">{</span>
             <span class="s">&#39;block_type&#39;</span><span class="p">:</span><span class="s">&#39;type_3&#39;</span><span class="p">,</span>
             <span class="s">&#39;width&#39;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">,</span>
             <span class="s">&#39;height&#39;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">,</span>
             <span class="s">&#39;f_params&#39;</span><span class="p">:[</span><span class="n">camera_params_1</span><span class="p">,</span><span class="n">camera_params_2</span><span class="p">,</span><span class="n">camera_params_3</span><span class="p">,</span>
                         <span class="n">camera_params_4</span><span class="p">],</span>
             <span class="s">&#39;mirror_x&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
             <span class="s">&#39;isopleth_values&#39;</span><span class="p">:[[</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="mf">100.0</span><span class="p">,</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="mf">4.0</span><span class="p">]],</span>
             <span class="p">}</span>

<span class="k">def</span> <span class="nf">old_EV</span><span class="p">(</span><span class="n">EV</span><span class="p">):</span> <span class="c"># C2(EV100) in wiki</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">-</span><span class="n">EV</span><span class="o">+</span><span class="mf">13.654</span><span class="p">)</span><span class="o">/</span><span class="mf">0.3322</span>

<span class="n">EV_para</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;tag&#39;</span><span class="p">:</span><span class="s">&#39;EV&#39;</span><span class="p">,</span>
        <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="mf">4.0</span><span class="p">,</span>
        <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">19.0</span><span class="p">,</span>
        <span class="s">&#39;function&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">u</span><span class="p">:</span><span class="n">old_EV</span><span class="p">(</span><span class="n">u</span><span class="p">),</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">r&#39;EV$_{100}$&#39;</span><span class="p">,</span>
        <span class="s">&#39;tick_levels&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        <span class="s">&#39;tick_text_levels&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
        <span class="s">&#39;align_func&#39;</span><span class="p">:</span><span class="n">old_EV</span><span class="p">,</span>
        <span class="s">&#39;title_x_shift&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="s">&#39;tick_side&#39;</span><span class="p">:</span><span class="s">&#39;right&#39;</span><span class="p">,</span>
        <span class="p">}</span>
<span class="n">EV_block</span><span class="o">=</span><span class="p">{</span>
         <span class="s">&#39;block_type&#39;</span><span class="p">:</span><span class="s">&#39;type_8&#39;</span><span class="p">,</span>
         <span class="s">&#39;f_params&#39;</span><span class="p">:</span><span class="n">EV_para</span><span class="p">,</span>
         <span class="s">&#39;isopleth_values&#39;</span><span class="p">:[[</span><span class="s">&#39;x&#39;</span><span class="p">]],</span>
            <span class="p">}</span>

<span class="c"># maximum focal length</span>
<span class="n">FL_t_para</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span>
        <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">10000.0</span><span class="p">,</span>
        <span class="s">&#39;function&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="o">*</span><span class="n">log10</span><span class="p">((</span><span class="mf">1.0</span><span class="o">/</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">10.0</span><span class="p">))</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span>
        <span class="s">&#39;scale_type&#39;</span><span class="p">:</span><span class="s">&#39;linear&#39;</span><span class="p">,</span>
        <span class="s">&#39;tick_levels&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s">&#39;tick_text_levels&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">r&#39;t (s)&#39;</span><span class="p">,</span>
        <span class="s">&#39;text_format&#39;</span><span class="p">:</span><span class="s">r&quot;1/</span><span class="si">%3.0f</span><span class="s"> s&quot;</span><span class="p">,</span>
        <span class="s">&#39;tag&#39;</span><span class="p">:</span><span class="s">&#39;shutter&#39;</span><span class="p">,</span>
                <span class="p">}</span>

<span class="n">FL_factor_params_2</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">4.0</span><span class="p">,</span>
        <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">3.0</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span>
        <span class="s">&#39;function&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">factor</span><span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="o">*</span><span class="n">log10</span><span class="p">(</span><span class="n">factor</span><span class="o">/</span><span class="mf">10.0</span><span class="p">)</span><span class="o">+</span><span class="mi">0</span><span class="p">,</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">r&#39;Sensor, IS&#39;</span><span class="p">,</span>
        <span class="s">&#39;scale_type&#39;</span><span class="p">:</span><span class="s">&#39;manual point&#39;</span><span class="p">,</span>
        <span class="s">&#39;manual_axis_data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">2.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">):</span><span class="s">&#39;DSLR&#39;</span><span class="p">,</span>
                     <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="p">):</span><span class="s">&#39;35mm&#39;</span><span class="p">,</span>
                     <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">8.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">):</span><span class="s">&#39;DSLR IS&#39;</span><span class="p">,</span>
                     <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">4.0</span><span class="p">):</span><span class="s">&#39;35mm IS&#39;</span><span class="p">,</span>
                     <span class="p">},</span>
        <span class="s">&#39;tick_side&#39;</span><span class="p">:</span><span class="s">&#39;left&#39;</span><span class="p">,</span>
        <span class="s">&#39;text_size_manual&#39;</span><span class="p">:</span><span class="n">text</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">footnotesize</span><span class="p">,</span> <span class="c"># pyx directive</span>
        <span class="p">}</span>

<span class="n">FL_fl_params</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;u_min&#39;</span><span class="p">:</span><span class="mf">20.0</span><span class="p">,</span>
        <span class="s">&#39;u_max&#39;</span><span class="p">:</span><span class="mf">1000.0</span><span class="p">,</span>
        <span class="s">&#39;function&#39;</span><span class="p">:</span><span class="k">lambda</span> <span class="n">FL</span><span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="o">*</span><span class="n">log10</span><span class="p">(</span><span class="n">FL</span><span class="p">)</span><span class="o">+</span><span class="mi">30</span><span class="p">,</span>
        <span class="s">&#39;title&#39;</span><span class="p">:</span><span class="s">r&#39;Max focal length&#39;</span><span class="p">,</span>
        <span class="s">&#39;tick_levels&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
        <span class="s">&#39;tick_text_levels&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
        <span class="s">&#39;tick_side&#39;</span><span class="p">:</span><span class="s">&#39;left&#39;</span><span class="p">,</span>
        <span class="s">&#39;scale_type&#39;</span><span class="p">:</span><span class="s">&#39;manual line&#39;</span><span class="p">,</span>
        <span class="s">&#39;manual_axis_data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="mf">20.0</span><span class="p">:</span><span class="s">&#39;20mm&#39;</span><span class="p">,</span>
                             <span class="mf">35.0</span><span class="p">:</span><span class="s">&#39;35mm&#39;</span><span class="p">,</span>
                             <span class="mf">50.0</span><span class="p">:</span><span class="s">&#39;50mm&#39;</span><span class="p">,</span>
                             <span class="mf">80.0</span><span class="p">:</span><span class="s">&#39;80mm&#39;</span><span class="p">,</span>
                             <span class="mf">100.0</span><span class="p">:</span><span class="s">&#39;100mm&#39;</span><span class="p">,</span>
                             <span class="mf">150.0</span><span class="p">:</span><span class="s">&#39;150mm&#39;</span><span class="p">,</span>
                             <span class="mf">200.0</span><span class="p">:</span><span class="s">&#39;200mm&#39;</span><span class="p">,</span>
                             <span class="mf">300.0</span><span class="p">:</span><span class="s">&#39;300mm&#39;</span><span class="p">,</span>
                             <span class="mf">400.0</span><span class="p">:</span><span class="s">&#39;400mm&#39;</span><span class="p">,</span>
                             <span class="mf">500.0</span><span class="p">:</span><span class="s">&#39;500mm&#39;</span><span class="p">,</span>
                             <span class="mf">1000.0</span><span class="p">:</span><span class="s">&#39;1000mm&#39;</span><span class="p">}</span>
        <span class="p">}</span>



<span class="n">FL_block_params</span><span class="o">=</span><span class="p">{</span>
             <span class="s">&#39;block_type&#39;</span><span class="p">:</span><span class="s">&#39;type_1&#39;</span><span class="p">,</span>
             <span class="s">&#39;width&#39;</span><span class="p">:</span><span class="mf">12.0</span><span class="p">,</span>
             <span class="s">&#39;height&#39;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">,</span>
             <span class="s">&#39;f1_params&#39;</span><span class="p">:</span><span class="n">FL_t_para</span><span class="p">,</span>
             <span class="s">&#39;f2_params&#39;</span><span class="p">:</span><span class="n">FL_factor_params_2</span><span class="p">,</span>
             <span class="s">&#39;f3_params&#39;</span><span class="p">:</span><span class="n">FL_fl_params</span><span class="p">,</span>
             <span class="s">&#39;mirror_x&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span>
             <span class="s">&#39;proportion&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">,</span>
             <span class="s">&#39;isopleth_values&#39;</span><span class="p">:[[</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="mf">8.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">),</span><span class="s">&#39;x&#39;</span><span class="p">]],</span>
             <span class="p">}</span>


<span class="n">main_params</span><span class="o">=</span><span class="p">{</span>
              <span class="s">&#39;filename&#39;</span><span class="p">:[</span><span class="s">&#39;ex_photo_exposure.pdf&#39;</span><span class="p">,</span><span class="s">&#39;ex_photo_exposure.eps&#39;</span><span class="p">],</span>
              <span class="s">&#39;paper_height&#39;</span><span class="p">:</span><span class="mf">35.0</span><span class="p">,</span>
              <span class="s">&#39;paper_width&#39;</span><span class="p">:</span><span class="mf">35.0</span><span class="p">,</span>
              <span class="s">&#39;block_params&#39;</span><span class="p">:[</span><span class="n">block_params</span><span class="p">,</span><span class="n">block_params_weather</span><span class="p">,</span><span class="n">block_params_scene</span><span class="p">,</span><span class="n">block_params_camera</span><span class="p">,</span><span class="n">EV_block</span><span class="p">,</span><span class="n">FL_block_params</span><span class="p">],</span>
              <span class="c">#&#39;block_params&#39;:[block_params_weather,block_params_scene,block_params_camera,EV_block,FL_block_params],</span>
              <span class="s">&#39;transformations&#39;</span><span class="p">:[(</span><span class="s">&#39;rotate&#39;</span><span class="p">,</span><span class="mf">0.01</span><span class="p">),(</span><span class="s">&#39;scale paper&#39;</span><span class="p">,)],</span>
              <span class="s">&#39;title_x&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
              <span class="s">&#39;title_y&#39;</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span>
              <span class="s">&#39;title_box_width&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
              <span class="s">&#39;title_str&#39;</span><span class="p">:</span><span class="s">r&#39;\LARGE Photography exposure (Setala 1940) \par \copyright Leif Roschier  2009 &#39;</span>
              <span class="p">}</span>
<span class="n">b</span><span class="o">=</span><span class="n">Nomographer</span><span class="p">(</span><span class="n">main_params</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Leif Roschier.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>